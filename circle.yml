machine:
  python:
    version: 3.5.0



# was 3345416


dependencies:
  override:
#    - sudo apt-get install libssl-dev
#    - mkdir ~/Downloads
#    - cd ~/Downloads/ && wget http://python.org/ftp/python/2.7.5/Python-2.7.5.tgz
#    - cd ~/Downloads/ && tar -xvf Python-2.7.5.tgz
#    - cd ~/Downloads/Python-2.7.5 && ./configure && make && sudo checkinstall
    - sudo add-apt-repository ppa:fkrull/deadsnakes -y
    - sudo apt-get update
    - sudo apt-get install python2.7
    # Have to upgrade virtualenv to make a virtualenv with python3
    - (virtualenv ~/virtualenvs/venv-2.7.5 -p /usr/local/bin/python2.7)
#    - (deactivate && source ~/virtualenvs/venv-3.5.0/bin/activate && pip install -r requirements35.txt)
    - (deactivate && source ~/virtualenvs/venv-2.7.5/bin/activate && pip install -r requirements27.txt && deactivate)
    # Then do it for python 3.5.0
    - pip install -r requirements35.txt
test:
  override:
    # Just do python 2 tests for now since py3 is fine
    #- (deactivate && source ~/virtualenvs/venv-3.5.0/bin/activate && py.test)
#    - (deactivate && source ~/virtualenvs/venv-2.7.5/bin/activate && pip freeze && py.test)
#    - flake8
    - (deactivate && source ~/virtualenvs/venv-2.7.5/bin/activate && py.test)
    - deactivate && py.test